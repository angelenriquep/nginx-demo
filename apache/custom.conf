<VirtualHost *:80>
    ServerName variant-a.localhost
    DocumentRoot /var/www/html

    <Directory /var/www/html>
        AllowOverride All
        Require all granted
    </Directory>

    <If "%{HTTP:X-Secret} != 'super-secret-key'">
        Require all denied
    </If>

    RewriteEngine On
    RewriteCond %{REQUEST_URI} ^/$
    RewriteRule ^/$ /variant_a/index.html [L]

    ErrorDocument 403 "Forbidden - Missing or incorrect X-Secret header"
</VirtualHost>

<VirtualHost *:80>
    ServerName variant-b.localhost
    DocumentRoot /var/www/html

    <Directory /var/www/html>
        AllowOverride All
        Require all granted
    </Directory>

    <If "%{HTTP:X-Secret} != 'super-secret-key'">
        Require all denied
    </If>

    RewriteEngine On
    RewriteCond %{REQUEST_URI} ^/$
    RewriteRule ^/$ /variant_b/index.html [L]

    ErrorDocument 403 "Forbidden - Missing or incorrect X-Secret header"
</VirtualHost>
